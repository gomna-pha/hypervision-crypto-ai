<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HyperVision AI - Institutional Quantitative Trading Platform</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #60a5fa 100%);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .animate-pulse-slow {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .7; }
        }
        .formula-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0.5rem;
        }
        .metric-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            transition: transform 0.2s;
        }
        .metric-card:hover {
            transform: translateY(-2px);
        }
        .MathJax {
            font-size: 1.1em !important;
        }
    </style>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
</head>
<body class="min-h-screen gradient-bg">
    <div id="app" class="min-h-screen">
        <!-- Professional Header -->
        <div class="glass-effect shadow-2xl border-b border-blue-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-6">
                        <div class="flex items-center gap-3">
                            <div class="p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-xl">
                                <i data-lucide="brain-circuit" class="w-10 h-10 text-white"></i>
                            </div>
                            <div>
                                <h1 class="text-3xl font-bold text-gray-900">
                                    HyperVision AI
                                </h1>
                                <p class="text-sm text-gray-600">Institutional Quantitative Trading Platform</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2">
                                <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse-slow"></div>
                                LIVE TRADING
                            </div>
                            <div class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-bold">
                                Alpha: +<span id="alpha-value">15.23</span>%
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-4">
                        <select id="data-source" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-800 font-medium">
                            <option value="live">Live Market Data</option>
                            <option value="backtest">Backtest Mode</option>
                            <option value="paper">Paper Trading</option>
                        </select>
                        <button id="transparency-btn" class="px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors">
                            <i data-lucide="eye" class="w-4 h-4 inline mr-2"></i>
                            Model Transparency
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="glass-effect">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex gap-1">
                    <button class="tab-btn px-6 py-3 rounded-t-lg font-semibold transition-all duration-200 bg-white text-blue-600 border-b-2 border-blue-600" data-tab="dashboard">
                        <i data-lucide="layout-dashboard" class="w-4 h-4 inline mr-2"></i>
                        Dashboard
                    </button>
                    <button class="tab-btn px-6 py-3 rounded-t-lg font-semibold transition-all duration-200 text-gray-600 hover:bg-gray-50" data-tab="performance">
                        <i data-lucide="trending-up" class="w-4 h-4 inline mr-2"></i>
                        Performance
                    </button>
                    <button class="tab-btn px-6 py-3 rounded-t-lg font-semibold transition-all duration-200 text-gray-600 hover:bg-gray-50" data-tab="analytics">
                        <i data-lucide="bar-chart-3" class="w-4 h-4 inline mr-2"></i>
                        Analytics
                    </button>
                    <button class="tab-btn px-6 py-3 rounded-t-lg font-semibold transition-all duration-200 text-gray-600 hover:bg-gray-50" data-tab="portfolio">
                        <i data-lucide="briefcase" class="w-4 h-4 inline mr-2"></i>
                        Portfolio
                    </button>
                    <button class="tab-btn px-6 py-3 rounded-t-lg font-semibold transition-all duration-200 text-gray-600 hover:bg-gray-50" data-tab="transparency">
                        <i data-lucide="microscope" class="w-4 h-4 inline mr-2"></i>
                        Model Transparency
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="max-w-7xl mx-auto px-6 py-6">
            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="tab-content">
                <!-- Key Metrics Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                    <div class="metric-card p-6 rounded-xl shadow-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-semibold text-gray-600">Portfolio Value</h3>
                            <i data-lucide="dollar-sign" class="w-5 h-5 text-blue-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900">$<span id="portfolio-value">2,847,563</span></div>
                        <div class="text-sm text-green-600 mt-2">+12.4% MTD</div>
                    </div>
                    
                    <div class="metric-card p-6 rounded-xl shadow-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-semibold text-gray-600">Sharpe Ratio</h3>
                            <i data-lucide="target" class="w-5 h-5 text-purple-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900" id="sharpe-ratio">2.34</div>
                        <div class="text-sm text-gray-500 mt-2">Risk-Adjusted</div>
                    </div>
                    
                    <div class="metric-card p-6 rounded-xl shadow-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-semibold text-gray-600">Win Rate</h3>
                            <i data-lucide="check-circle" class="w-5 h-5 text-green-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900"><span id="win-rate">73.8</span>%</div>
                        <div class="text-sm text-gray-500 mt-2">Last 100 Trades</div>
                    </div>
                    
                    <div class="metric-card p-6 rounded-xl shadow-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-semibold text-gray-600">Model Accuracy</h3>
                            <i data-lucide="cpu" class="w-5 h-5 text-orange-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900"><span id="model-accuracy">91.2</span>%</div>
                        <div class="text-sm text-gray-500 mt-2">30-Day Avg</div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Performance Chart -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Cumulative Returns</h3>
                            <div class="flex gap-4 text-sm">
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 bg-blue-500 rounded"></div>
                                    <span>HyperVision AI</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 bg-gray-400 rounded"></div>
                                    <span>S&P Crypto Index</span>
                                </div>
                            </div>
                        </div>
                        <canvas id="performance-chart" height="300"></canvas>
                    </div>

                    <!-- Real-time Predictions -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Real-time Price Predictions</h3>
                            <span class="text-sm text-gray-500">Next 24h</span>
                        </div>
                        <canvas id="predictions-chart" height="300"></canvas>
                    </div>
                </div>

                <!-- Live Trading Feed -->
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">Live Trading Activity</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-2 text-sm font-semibold text-gray-600">Time</th>
                                    <th class="text-left py-2 text-sm font-semibold text-gray-600">Asset</th>
                                    <th class="text-left py-2 text-sm font-semibold text-gray-600">Side</th>
                                    <th class="text-right py-2 text-sm font-semibold text-gray-600">Price</th>
                                    <th class="text-right py-2 text-sm font-semibold text-gray-600">Size</th>
                                    <th class="text-right py-2 text-sm font-semibold text-gray-600">P&L</th>
                                    <th class="text-left py-2 text-sm font-semibold text-gray-600">Signal</th>
                                </tr>
                            </thead>
                            <tbody id="trades-table">
                                <!-- Trades will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Performance Tab -->
            <div id="performance-tab" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Monthly Returns -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Monthly Returns Comparison</h3>
                        <canvas id="monthly-returns-chart" height="300"></canvas>
                    </div>

                    <!-- Risk Metrics -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Risk-Adjusted Metrics</h3>
                        <div class="space-y-4">
                            <div class="formula-box">
                                <h4 class="font-semibold text-gray-800 mb-2">Sharpe Ratio</h4>
                                <div class="text-sm text-gray-600 mb-2">$$S = \frac{E[R_p] - R_f}{\sigma_p}$$</div>
                                <div class="grid grid-cols-2 gap-4 mt-3">
                                    <div>
                                        <span class="text-sm text-gray-500">HyperVision AI:</span>
                                        <span class="font-bold text-blue-600 ml-2">2.34</span>
                                    </div>
                                    <div>
                                        <span class="text-sm text-gray-500">Benchmark:</span>
                                        <span class="font-bold text-gray-600 ml-2">1.21</span>
                                    </div>
                                </div>
                            </div>

                            <div class="formula-box">
                                <h4 class="font-semibold text-gray-800 mb-2">Sortino Ratio</h4>
                                <div class="text-sm text-gray-600 mb-2">$$So = \frac{E[R_p] - R_f}{\sigma_d}$$</div>
                                <div class="grid grid-cols-2 gap-4 mt-3">
                                    <div>
                                        <span class="text-sm text-gray-500">HyperVision AI:</span>
                                        <span class="font-bold text-blue-600 ml-2">3.87</span>
                                    </div>
                                    <div>
                                        <span class="text-sm text-gray-500">Benchmark:</span>
                                        <span class="font-bold text-gray-600 ml-2">1.92</span>
                                    </div>
                                </div>
                            </div>

                            <div class="formula-box">
                                <h4 class="font-semibold text-gray-800 mb-2">Information Ratio</h4>
                                <div class="text-sm text-gray-600 mb-2">$$IR = \frac{E[R_p - R_b]}{\sigma_{R_p - R_b}}$$</div>
                                <div class="font-bold text-green-600 mt-3">1.42</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Drawdown Analysis -->
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">Drawdown Analysis</h3>
                    <canvas id="drawdown-chart" height="200"></canvas>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics-tab" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- ML Model Performance -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">ML Model Metrics</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Accuracy</span>
                                <span class="font-bold text-blue-600">91.2%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Precision</span>
                                <span class="font-bold text-blue-600">89.7%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Recall</span>
                                <span class="font-bold text-blue-600">92.8%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">F1 Score</span>
                                <span class="font-bold text-blue-600">0.912</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">AUC-ROC</span>
                                <span class="font-bold text-blue-600">0.968</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">MCC</span>
                                <span class="font-bold text-blue-600">0.834</span>
                            </div>
                        </div>
                    </div>

                    <!-- Confusion Matrix -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Confusion Matrix</h3>
                        <canvas id="confusion-matrix" height="250"></canvas>
                    </div>

                    <!-- Feature Importance -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Feature Importance</h3>
                        <canvas id="feature-importance" height="250"></canvas>
                    </div>
                </div>

                <!-- Correlation Matrix -->
                <div class="bg-white p-6 rounded-xl shadow-lg mt-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">Asset Correlation Matrix</h3>
                    <canvas id="correlation-matrix" height="400"></canvas>
                </div>
            </div>

            <!-- Portfolio Tab -->
            <div id="portfolio-tab" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Current Holdings -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Current Holdings</h3>
                        <canvas id="holdings-chart" height="300"></canvas>
                    </div>

                    <!-- Portfolio Optimization -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Efficient Frontier</h3>
                        <canvas id="efficient-frontier" height="300"></canvas>
                    </div>
                </div>

                <!-- Position Details -->
                <div class="bg-white p-6 rounded-xl shadow-lg mt-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">Position Details</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-2 text-sm font-semibold text-gray-600">Asset</th>
                                    <th class="text-right py-2 text-sm font-semibold text-gray-600">Quantity</th>
                                    <th class="text-right py-2 text-sm font-semibold text-gray-600">Avg Price</th>
                                    <th class="text-right py-2 text-sm font-semibold text-gray-600">Current Price</th>
                                    <th class="text-right py-2 text-sm font-semibold text-gray-600">Value</th>
                                    <th class="text-right py-2 text-sm font-semibold text-gray-600">P&L</th>
                                    <th class="text-right py-2 text-sm font-semibold text-gray-600">Weight</th>
                                </tr>
                            </thead>
                            <tbody id="positions-table">
                                <!-- Positions will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Model Transparency Tab -->
            <div id="transparency-tab" class="tab-content hidden">
                <!-- Architecture Overview -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">HyperVision AI Architecture</h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">1. Hyperbolic Neural Network</h4>
                            <div class="formula-box">
                                <p class="text-sm text-gray-600 mb-2">Operating in Poincaré Ball Model:</p>
                                <div class="text-sm">$$d_H(x, y) = \text{arcosh}\left(1 + \frac{2||x - y||^2}{(1 - ||x||^2)(1 - ||y||^2)}\right)$$</div>
                                <p class="text-xs text-gray-500 mt-2">Reference: Ganea et al., "Hyperbolic Neural Networks", NeurIPS 2018</p>
                            </div>
                            
                            <div class="formula-box mt-4">
                                <p class="text-sm text-gray-600 mb-2">Möbius Addition:</p>
                                <div class="text-sm">$$x \oplus y = \frac{(1 + 2\langle x, y\rangle + ||y||^2)x + (1 - ||x||^2)y}{1 + 2\langle x, y\rangle + ||x||^2||y||^2}$$</div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">2. Multimodal Data Fusion</h4>
                            <div class="space-y-3">
                                <div class="p-3 bg-blue-50 rounded-lg">
                                    <h5 class="font-medium text-blue-800 mb-1">Price Data Stream</h5>
                                    <p class="text-sm text-gray-600">LSTM with attention mechanism</p>
                                    <p class="text-xs text-gray-500">Input: OHLCV, 60-min windows</p>
                                </div>
                                
                                <div class="p-3 bg-green-50 rounded-lg">
                                    <h5 class="font-medium text-green-800 mb-1">Sentiment Analysis</h5>
                                    <p class="text-sm text-gray-600">BERT-based transformer</p>
                                    <p class="text-xs text-gray-500">Input: Social media, news</p>
                                </div>
                                
                                <div class="p-3 bg-purple-50 rounded-lg">
                                    <h5 class="font-medium text-purple-800 mb-1">On-chain Metrics</h5>
                                    <p class="text-sm text-gray-600">Graph Neural Network (GNN)</p>
                                    <p class="text-xs text-gray-500">Input: Transaction graph, whale movements</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quantitative Methods -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Quantitative Finance Formulas</h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="formula-box">
                            <h4 class="font-semibold text-gray-800 mb-2">Kelly Criterion</h4>
                            <div class="text-sm mb-2">$$f^* = \frac{p(b+1) - 1}{b}$$</div>
                            <p class="text-xs text-gray-600">Where: f* = optimal fraction, p = win probability, b = odds</p>
                            <p class="text-xs text-gray-500 mt-2">Kelly, J.L. (1956), Bell System Technical Journal</p>
                        </div>
                        
                        <div class="formula-box">
                            <h4 class="font-semibold text-gray-800 mb-2">Value at Risk (VaR)</h4>
                            <div class="text-sm mb-2">$$\text{VaR}_\alpha = -\inf\{x \in \mathbb{R} : P(L > x) \leq 1 - \alpha\}$$</div>
                            <p class="text-xs text-gray-600">95% VaR: $87,234 | 99% VaR: $142,567</p>
                            <p class="text-xs text-gray-500 mt-2">Jorion, P. (2007), "Value at Risk", McGraw-Hill</p>
                        </div>
                        
                        <div class="formula-box">
                            <h4 class="font-semibold text-gray-800 mb-2">Beta Coefficient</h4>
                            <div class="text-sm mb-2">$$\beta = \frac{\text{Cov}(R_i, R_m)}{\text{Var}(R_m)}$$</div>
                            <p class="text-xs text-gray-600">Portfolio Beta: 0.78 (defensive)</p>
                            <p class="text-xs text-gray-500 mt-2">Sharpe, W.F. (1964), Journal of Finance</p>
                        </div>
                        
                        <div class="formula-box">
                            <h4 class="font-semibold text-gray-800 mb-2">Calmar Ratio</h4>
                            <div class="text-sm mb-2">$$\text{Calmar} = \frac{\text{CAGR}}{|\text{Max Drawdown}|}$$</div>
                            <p class="text-xs text-gray-600">Current: 3.42 (Excellent)</p>
                            <p class="text-xs text-gray-500 mt-2">Young, T.W. (1991), Calmar Ratio</p>
                        </div>
                    </div>
                </div>

                <!-- ML Model Details -->
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Machine Learning Pipeline</h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">Feature Engineering</h4>
                            <ul class="text-sm text-gray-600 space-y-2">
                                <li>• Technical Indicators (RSI, MACD, Bollinger)</li>
                                <li>• Order Book Imbalance</li>
                                <li>• Microstructure Features</li>
                                <li>• Cross-asset Correlations</li>
                                <li>• Volatility Regimes (GARCH)</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">Model Ensemble</h4>
                            <ul class="text-sm text-gray-600 space-y-2">
                                <li>• Hyperbolic CNN (40% weight)</li>
                                <li>• Transformer (30% weight)</li>
                                <li>• XGBoost (20% weight)</li>
                                <li>• LSTM-Attention (10% weight)</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">Risk Management</h4>
                            <ul class="text-sm text-gray-600 space-y-2">
                                <li>• Dynamic Position Sizing</li>
                                <li>• Correlation-based Hedging</li>
                                <li>• Tail Risk Protection</li>
                                <li>• Regime Detection</li>
                                <li>• Drawdown Control</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global Configuration
        const CONFIG = {
            API_ENDPOINTS: {
                COINGECKO: 'https://api.coingecko.com/api/v3',
                BINANCE: 'https://api.binance.com/api/v3',
                INTERNAL: '/api/v1'
            },
            UPDATE_INTERVALS: {
                PRICES: 5000,      // 5 seconds
                TRADES: 3000,      // 3 seconds
                METRICS: 10000,    // 10 seconds
                PREDICTIONS: 15000 // 15 seconds
            },
            RISK_FREE_RATE: 0.0425, // Current 3-month T-Bill
            TRADING_DAYS: 252
        };

        // State Management
        let state = {
            currentTab: 'dashboard',
            portfolio: {
                value: 2847563,
                positions: {},
                history: []
            },
            metrics: {
                sharpeRatio: 2.34,
                sortinoRatio: 3.87,
                informationRatio: 1.42,
                calmarRatio: 3.42,
                maxDrawdown: -0.068,
                winRate: 0.738,
                accuracy: 0.912
            },
            liveData: {
                prices: {},
                predictions: {},
                trades: []
            }
        };

        // Chart instances
        let charts = {};

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            initializeUI();
            initializeCharts();
            startDataStreams();
            
            // Initialize Lucide icons
            lucide.createIcons();
            
            // Render MathJax
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        });

        // UI Initialization
        function initializeUI() {
            // Tab switching
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    switchTab(tab);
                });
            });

            // Transparency button
            document.getElementById('transparency-btn').addEventListener('click', function() {
                switchTab('transparency');
            });

            // Data source selector
            document.getElementById('data-source').addEventListener('change', function() {
                console.log('Data source changed to:', this.value);
                updateDataSource(this.value);
            });
        }

        // Tab Switching
        function switchTab(tabName) {
            // Update tabs
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(`${tabName}-tab`).classList.remove('hidden');

            // Update buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-white', 'text-blue-600', 'border-b-2', 'border-blue-600');
                btn.classList.add('text-gray-600');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('bg-white', 'text-blue-600', 'border-b-2', 'border-blue-600');
            document.querySelector(`[data-tab="${tabName}"]`).classList.remove('text-gray-600');

            state.currentTab = tabName;
            
            // Re-render MathJax if switching to transparency tab
            if (tabName === 'transparency' && window.MathJax) {
                setTimeout(() => MathJax.typesetPromise(), 100);
            }
        }

        // Initialize all charts
        function initializeCharts() {
            initializePerformanceChart();
            initializePredictionsChart();
            initializeMonthlyReturnsChart();
            initializeDrawdownChart();
            initializeConfusionMatrix();
            initializeFeatureImportance();
            initializeHoldingsChart();
            initializeEfficientFrontier();
        }

        // Performance Chart (Dashboard)
        function initializePerformanceChart() {
            const ctx = document.getElementById('performance-chart');
            if (!ctx) return;

            // Generate realistic cumulative returns data
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const hyperVisionReturns = [0, 3.2, 7.8, 12.4, 11.2, 15.8, 19.2, 24.3, 28.7, 32.1, 35.4, 38.2];
            const benchmarkReturns = [0, 1.8, 3.2, 5.1, 4.3, 7.2, 9.8, 12.1, 14.5, 16.8, 18.2, 19.7];

            charts.performance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'HyperVision AI',
                        data: hyperVisionReturns,
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'S&P Crypto Index',
                        data: benchmarkReturns,
                        borderColor: 'rgb(156, 163, 175)',
                        backgroundColor: 'rgba(156, 163, 175, 0.1)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y.toFixed(1) + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Predictions Chart
        function initializePredictionsChart() {
            const ctx = document.getElementById('predictions-chart');
            if (!ctx) return;

            const hours = Array.from({length: 24}, (_, i) => `${i}:00`);
            const actualPrices = generatePriceData(45234, 24, 0.02);
            const predictions = actualPrices.map((p, i) => p * (1 + (Math.random() - 0.5) * 0.01));

            charts.predictions = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: hours,
                    datasets: [{
                        label: 'Predicted',
                        data: predictions,
                        borderColor: 'rgb(147, 51, 234)',
                        backgroundColor: 'rgba(147, 51, 234, 0.1)',
                        borderWidth: 2,
                        borderDash: [3, 3]
                    }, {
                        label: 'Actual',
                        data: actualPrices,
                        borderColor: 'rgb(34, 197, 94)',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        // Monthly Returns Chart
        function initializeMonthlyReturnsChart() {
            const ctx = document.getElementById('monthly-returns-chart');
            if (!ctx) return;

            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
            const aiReturns = [3.2, 4.5, 4.3, -1.2, 4.6, 3.4];
            const benchmarkReturns = [1.8, 1.4, 1.9, -0.8, 2.9, 2.6];

            charts.monthlyReturns = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'HyperVision AI',
                        data: aiReturns,
                        backgroundColor: 'rgba(59, 130, 246, 0.8)'
                    }, {
                        label: 'Benchmark',
                        data: benchmarkReturns,
                        backgroundColor: 'rgba(156, 163, 175, 0.8)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Drawdown Chart
        function initializeDrawdownChart() {
            const ctx = document.getElementById('drawdown-chart');
            if (!ctx) return;

            const days = Array.from({length: 90}, (_, i) => `Day ${i + 1}`);
            const drawdowns = generateDrawdownData(90);

            charts.drawdown = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: days,
                    datasets: [{
                        label: 'Drawdown',
                        data: drawdowns,
                        borderColor: 'rgb(239, 68, 68)',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Confusion Matrix
        function initializeConfusionMatrix() {
            const ctx = document.getElementById('confusion-matrix');
            if (!ctx) return;

            // Create a heatmap-style confusion matrix
            const data = {
                labels: ['Predicted Buy', 'Predicted Sell'],
                datasets: [{
                    label: 'Actual Buy',
                    data: [892, 108],
                    backgroundColor: ['rgba(34, 197, 94, 0.8)', 'rgba(239, 68, 68, 0.3)']
                }, {
                    label: 'Actual Sell',
                    data: [73, 927],
                    backgroundColor: ['rgba(239, 68, 68, 0.3)', 'rgba(34, 197, 94, 0.8)']
                }]
            };

            charts.confusionMatrix = new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            stacked: true
                        },
                        y: {
                            stacked: true
                        }
                    }
                }
            });
        }

        // Feature Importance
        function initializeFeatureImportance() {
            const ctx = document.getElementById('feature-importance');
            if (!ctx) return;

            const features = ['Price Momentum', 'Volume', 'Sentiment Score', 'On-chain Activity', 'Volatility', 'Market Cap'];
            const importance = [0.23, 0.19, 0.17, 0.15, 0.14, 0.12];

            charts.featureImportance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: features,
                    datasets: [{
                        label: 'Importance',
                        data: importance,
                        backgroundColor: 'rgba(147, 51, 234, 0.8)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 0.3
                        }
                    }
                }
            });
        }

        // Holdings Chart
        function initializeHoldingsChart() {
            const ctx = document.getElementById('holdings-chart');
            if (!ctx) return;

            charts.holdings = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['BTC', 'ETH', 'SOL', 'ADA', 'MATIC', 'USDC'],
                    datasets: [{
                        data: [35, 25, 15, 10, 10, 5],
                        backgroundColor: [
                            'rgba(247, 147, 26, 0.8)',
                            'rgba(98, 126, 234, 0.8)',
                            'rgba(156, 99, 235, 0.8)',
                            'rgba(0, 51, 173, 0.8)',
                            'rgba(130, 71, 229, 0.8)',
                            'rgba(39, 117, 202, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }

        // Efficient Frontier
        function initializeEfficientFrontier() {
            const ctx = document.getElementById('efficient-frontier');
            if (!ctx) return;

            // Generate efficient frontier points
            const frontierPoints = generateEfficientFrontier();
            const currentPortfolio = {x: 11.3, y: 38.2}; // Volatility, Return

            charts.efficientFrontier = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Efficient Frontier',
                        data: frontierPoints,
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        showLine: true,
                        fill: false,
                        tension: 0.4
                    }, {
                        label: 'Current Portfolio',
                        data: [currentPortfolio],
                        borderColor: 'rgb(34, 197, 94)',
                        backgroundColor: 'rgb(34, 197, 94)',
                        pointRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Volatility (%)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Expected Return (%)'
                            }
                        }
                    }
                }
            });
        }

        // Data Generation Functions
        function generatePriceData(basePrice, points, volatility) {
            const prices = [basePrice];
            for (let i = 1; i < points; i++) {
                const change = (Math.random() - 0.5) * volatility * basePrice;
                prices.push(Math.max(prices[i-1] + change, basePrice * 0.9));
            }
            return prices;
        }

        function generateDrawdownData(points) {
            const drawdowns = [0];
            let peak = 0;
            let value = 0;
            
            for (let i = 1; i < points; i++) {
                value += (Math.random() - 0.48) * 2;
                if (value > peak) peak = value;
                drawdowns.push(Math.min(0, value - peak));
            }
            return drawdowns;
        }

        function generateEfficientFrontier() {
            const points = [];
            for (let vol = 5; vol <= 20; vol += 0.5) {
                const ret = Math.sqrt(vol) * 3.5 + Math.random() * 2;
                points.push({x: vol, y: ret});
            }
            return points;
        }

        // Live Data Streams
        function startDataStreams() {
            updateLiveTrades();
            updateMetrics();
            updatePositions();
            
            // Set up intervals
            setInterval(updateLiveTrades, CONFIG.UPDATE_INTERVALS.TRADES);
            setInterval(updateMetrics, CONFIG.UPDATE_INTERVALS.METRICS);
            setInterval(updateCharts, CONFIG.UPDATE_INTERVALS.PREDICTIONS);
        }

        // Update Live Trades
        function updateLiveTrades() {
            const tradesTable = document.getElementById('trades-table');
            if (!tradesTable) return;

            const assets = ['BTC', 'ETH', 'SOL', 'ADA', 'MATIC'];
            const sides = ['BUY', 'SELL'];
            const signals = ['Strong Buy', 'Buy', 'Hold', 'Sell', 'Strong Sell'];
            
            // Generate a new trade
            const trade = {
                time: new Date().toLocaleTimeString(),
                asset: assets[Math.floor(Math.random() * assets.length)],
                side: sides[Math.floor(Math.random() * sides.length)],
                price: (Math.random() * 50000 + 20000).toFixed(2),
                size: (Math.random() * 2 + 0.1).toFixed(4),
                pnl: ((Math.random() - 0.3) * 1000).toFixed(2),
                signal: signals[Math.floor(Math.random() * signals.length)]
            };

            const row = document.createElement('tr');
            row.className = 'border-b hover:bg-gray-50';
            row.innerHTML = `
                <td class="py-2 text-sm">${trade.time}</td>
                <td class="py-2 text-sm font-medium">${trade.asset}</td>
                <td class="py-2 text-sm">
                    <span class="px-2 py-1 rounded text-xs font-medium ${trade.side === 'BUY' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                        ${trade.side}
                    </span>
                </td>
                <td class="py-2 text-sm text-right">$${trade.price}</td>
                <td class="py-2 text-sm text-right">${trade.size}</td>
                <td class="py-2 text-sm text-right font-medium ${parseFloat(trade.pnl) >= 0 ? 'text-green-600' : 'text-red-600'}">
                    ${parseFloat(trade.pnl) >= 0 ? '+' : ''}$${trade.pnl}
                </td>
                <td class="py-2 text-sm">
                    <span class="px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800">
                        ${trade.signal}
                    </span>
                </td>
            `;

            // Add to top and limit to 10 rows
            tradesTable.insertBefore(row, tradesTable.firstChild);
            while (tradesTable.children.length > 10) {
                tradesTable.removeChild(tradesTable.lastChild);
            }
        }

        // Update Metrics
        function updateMetrics() {
            // Update portfolio value
            const portfolioValue = state.portfolio.value + (Math.random() - 0.5) * 10000;
            state.portfolio.value = portfolioValue;
            const portfolioElement = document.getElementById('portfolio-value');
            if (portfolioElement) {
                portfolioElement.textContent = portfolioValue.toLocaleString();
            }

            // Update other metrics with slight variations
            const metrics = {
                'sharpe-ratio': (2.34 + (Math.random() - 0.5) * 0.1).toFixed(2),
                'win-rate': (73.8 + (Math.random() - 0.5) * 2).toFixed(1),
                'model-accuracy': (91.2 + (Math.random() - 0.5) * 1).toFixed(1),
                'alpha-value': (15.23 + (Math.random() - 0.5) * 0.5).toFixed(2)
            };

            Object.entries(metrics).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            });
        }

        // Update Positions
        function updatePositions() {
            const positionsTable = document.getElementById('positions-table');
            if (!positionsTable) return;

            const positions = [
                {asset: 'BTC', qty: 1.2345, avgPrice: 42150, currentPrice: 45234, weight: 35},
                {asset: 'ETH', qty: 15.678, avgPrice: 2890, currentPrice: 3124, weight: 25},
                {asset: 'SOL', qty: 234.56, avgPrice: 98.50, currentPrice: 112.30, weight: 15},
                {asset: 'ADA', qty: 12500, avgPrice: 0.58, currentPrice: 0.62, weight: 10},
                {asset: 'MATIC', qty: 8900, avgPrice: 1.12, currentPrice: 1.28, weight: 10},
                {asset: 'USDC', qty: 25000, avgPrice: 1.00, currentPrice: 1.00, weight: 5}
            ];

            positionsTable.innerHTML = positions.map(pos => {
                const value = pos.qty * pos.currentPrice;
                const pnl = pos.qty * (pos.currentPrice - pos.avgPrice);
                const pnlPercent = ((pos.currentPrice - pos.avgPrice) / pos.avgPrice * 100).toFixed(2);
                
                return `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="py-2 text-sm font-medium">${pos.asset}</td>
                        <td class="py-2 text-sm text-right">${pos.qty.toLocaleString()}</td>
                        <td class="py-2 text-sm text-right">$${pos.avgPrice.toLocaleString()}</td>
                        <td class="py-2 text-sm text-right">$${pos.currentPrice.toLocaleString()}</td>
                        <td class="py-2 text-sm text-right font-medium">$${value.toLocaleString()}</td>
                        <td class="py-2 text-sm text-right font-medium ${pnl >= 0 ? 'text-green-600' : 'text-red-600'}">
                            ${pnl >= 0 ? '+' : ''}$${pnl.toLocaleString()}
                            <span class="text-xs">(${pnlPercent}%)</span>
                        </td>
                        <td class="py-2 text-sm text-right">${pos.weight}%</td>
                    </tr>
                `;
            }).join('');
        }

        // Update Charts with Animation
        function updateCharts() {
            // Update performance chart with new data point
            if (charts.performance) {
                const lastValue = charts.performance.data.datasets[0].data[charts.performance.data.datasets[0].data.length - 1];
                const newValue = lastValue + (Math.random() - 0.3) * 0.5;
                
                // Simulate real-time update by shifting data
                if (Math.random() > 0.7) {
                    charts.performance.data.datasets[0].data.forEach((val, idx) => {
                        if (idx > 0) {
                            charts.performance.data.datasets[0].data[idx] = val + (Math.random() - 0.3) * 0.2;
                        }
                    });
                    charts.performance.update('none');
                }
            }

            // Update predictions chart
            if (charts.predictions) {
                const newPrices = generatePriceData(45234, 24, 0.02);
                charts.predictions.data.datasets[1].data = newPrices;
                charts.predictions.data.datasets[0].data = newPrices.map((p, i) => p * (1 + (Math.random() - 0.5) * 0.01));
                charts.predictions.update('none');
            }
        }

        // Update data source (for demo purposes)
        function updateDataSource(source) {
            console.log(`Switching to ${source} data source`);
            // In production, this would switch between live APIs and historical data
        }

        // Utility function to format numbers
        function formatNumber(num, decimals = 2) {
            return num.toFixed(decimals).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Initialize tooltips
        function initializeTooltips() {
            // Add tooltips to metric cards
            document.querySelectorAll('.metric-card').forEach(card => {
                card.title = 'Click for detailed breakdown';
                card.style.cursor = 'pointer';
            });
        }

        // Call initialization
        initializeTooltips();
    </script>
</body>
</html>