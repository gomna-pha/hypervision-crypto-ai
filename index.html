<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HyperVision AI - Quantitative Trading Platform</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #dbeafe 0%, #fef3e2 30%, #bfdbfe 100%);
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .bg-cream-50 { background-color: #fefbf3; }
        .bg-cream-100 { background-color: #fef9e7; }
        .bg-cream-200 { background-color: #fdf4d3; }
        .bg-cream-300 { background-color: #fbeaa0; }
        .bg-cream-400 { background-color: #f9dd82; }
        .border-cream-200 { border-color: #fdf4d3; }
        .text-cream-800 { color: #92400e; }
    </style>
</head>
<body class="min-h-screen gradient-bg text-gray-800">
    <div id="app">
        <!-- Header -->
        <div class="bg-gradient-to-r from-blue-500 to-blue-600 shadow-2xl border-b border-blue-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-gradient-to-br from-cream-300 to-cream-400 rounded-lg shadow-lg">
                                <i data-lucide="brain" class="w-8 h-8 text-blue-700"></i>
                            </div>
                            <h1 class="text-2xl font-bold text-white">
                                HyperVision AI - Quantitative Trading Platform
                            </h1>
                        </div>
                        <div class="bg-gradient-to-r from-cream-200 to-cream-300 text-blue-800 px-4 py-2 rounded-full text-sm font-semibold flex items-center gap-2 shadow-lg">
                            <div class="w-3 h-3 rounded-full bg-green-400 animate-pulse"></div>
                            Alpha vs Benchmark: +<span id="alpha-generation">13.9</span>% â€¢ Live
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-4">
                        <select id="user-mode" class="px-4 py-2 bg-white border border-blue-200 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400 hover:border-blue-300 transition-colors font-medium">
                            <option value="retail">Professional Trader</option>
                            <option value="institutional">Institutional</option>
                            <option value="research">Quantitative Research</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation and Controls -->
        <div class="max-w-7xl mx-auto px-6 py-6">
            <!-- Navigation Tabs -->
            <div class="flex gap-3 mb-6 flex-wrap justify-center">
                <button class="tab-button px-6 py-3 rounded-lg font-semibold capitalize transition-all duration-200 flex items-center gap-2 shadow-lg bg-gradient-to-r from-blue-400 to-blue-500 text-white shadow-blue-400/25" data-tab="dashboard">
                    <i data-lucide="activity" class="w-4 h-4"></i>
                    Dashboard
                </button>
                <button class="tab-button px-6 py-3 rounded-lg font-semibold capitalize transition-all duration-200 flex items-center gap-2 shadow-lg bg-gradient-to-r from-cream-200 to-cream-300 text-gray-800 hover:from-cream-300 hover:to-cream-400 border border-blue-200" data-tab="performance">
                    <i data-lucide="trending-up" class="w-4 h-4"></i>
                    Performance
                </button>
                <button class="tab-button px-6 py-3 rounded-lg font-semibold capitalize transition-all duration-200 flex items-center gap-2 shadow-lg bg-gradient-to-r from-cream-200 to-cream-300 text-gray-800 hover:from-cream-300 hover:to-cream-400 border border-blue-200" data-tab="analytics">
                    <i data-lucide="brain" class="w-4 h-4"></i>
                    Analytics
                </button>
                <button class="tab-button px-6 py-3 rounded-lg font-semibold capitalize transition-all duration-200 flex items-center gap-2 shadow-lg bg-gradient-to-r from-cream-200 to-cream-300 text-gray-800 hover:from-cream-300 hover:to-cream-400 border border-blue-200" data-tab="portfolio">
                    <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
                    Portfolio
                </button>
            </div>

            <!-- Controls -->
            <div class="flex gap-4 mb-6 flex-wrap justify-center">
                <select id="asset-select" class="px-4 py-3 bg-white border border-blue-200 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400 hover:border-blue-300 transition-colors font-medium shadow-lg">
                    <optgroup label="Crypto Assets">
                        <option value="BTC-USD">BTC-USD</option>
                        <option value="ETH-USD">ETH-USD</option>
                        <option value="ADA-USD">ADA-USD</option>
                        <option value="SOL-USD">SOL-USD</option>
                        <option value="MATIC-USD">MATIC-USD</option>
                    </optgroup>
                    <optgroup label="Stablecoins">
                        <option value="USDT-USD">USDT (Tether)</option>
                        <option value="USDC-USD">USDC (Circle)</option>
                        <option value="DAI-USD">DAI (MakerDAO)</option>
                        <option value="BUSD-USD">BUSD (Binance)</option>
                    </optgroup>
                </select>
                
                <select id="horizon-select" class="px-4 py-3 bg-white border border-blue-200 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400 hover:border-blue-300 transition-colors font-medium shadow-lg">
                    <option value="1h">1 Hour</option>
                    <option value="4h">4 Hours</option>
                    <option value="1d">1 Day</option>
                    <option value="1w">1 Week</option>
                </select>
            </div>

            <!-- Tab Content -->
            <div id="tab-content">
                <!-- Dashboard Tab (Active) -->
                <div id="dashboard-content" class="space-y-8">
                    <!-- Executive Summary Panel -->
                    <div class="bg-gradient-to-r from-cream-100 to-blue-100 rounded-xl p-6 shadow-2xl border border-blue-200">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="p-3 bg-gradient-to-br from-blue-400 to-blue-500 rounded-lg">
                                <i data-lucide="activity" class="w-6 h-6 text-white"></i>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-800">Executive Dashboard</h2>
                            <div class="ml-auto bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-bold">
                                ðŸŸ¢ ALL SYSTEMS OPERATIONAL
                            </div>
                        </div>
                        
                        <!-- Key Metrics Row -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-white rounded-xl p-5 shadow-lg border border-blue-200 hover:shadow-xl transition-all duration-300">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="p-2 bg-gradient-to-br from-blue-400 to-blue-500 rounded-lg">
                                            <i data-lucide="award" class="w-5 h-5 text-white"></i>
                                        </div>
                                        <div class="w-3 h-3 rounded-full bg-green-400 animate-pulse"></div>
                                    </div>
                                    <span class="text-sm font-semibold text-green-600">â†— 5.7%</span>
                                </div>
                                <div class="text-2xl font-bold text-gray-800 mb-1">$2.42M</div>
                                <div class="text-sm text-gray-600 font-medium">Portfolio Value</div>
                                <div class="text-xs text-blue-600 mt-2 font-medium bg-blue-50 px-2 py-1 rounded">
                                    ðŸ”´ LIVE â€¢ <span id="time-1"></span>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl p-5 shadow-lg border border-blue-200 hover:shadow-xl transition-all duration-300">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="p-2 bg-gradient-to-br from-green-400 to-green-500 rounded-lg">
                                            <i data-lucide="trending-up" class="w-5 h-5 text-white"></i>
                                        </div>
                                    </div>
                                    <span class="text-sm font-semibold text-green-600">Outperforming</span>
                                </div>
                                <div class="text-2xl font-bold text-green-600 mb-1">+32.7%</div>
                                <div class="text-sm text-gray-600 font-medium">HyperVision AI Return</div>
                                <div class="text-xs text-gray-500 mt-2">YTD Performance</div>
                            </div>

                            <div class="bg-white rounded-xl p-5 shadow-lg border border-blue-200 hover:shadow-xl transition-all duration-300">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="p-2 bg-gradient-to-br from-gray-400 to-gray-500 rounded-lg">
                                            <i data-lucide="bar-chart" class="w-5 h-5 text-white"></i>
                                        </div>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-600">Benchmark</span>
                                </div>
                                <div class="text-2xl font-bold text-gray-700 mb-1">+18.8%</div>
                                <div class="text-sm text-gray-600 font-medium">S&P Crypto Index</div>
                                <div class="text-xs text-gray-500 mt-2">YTD Performance</div>
                            </div>

                            <div class="bg-white rounded-xl p-5 shadow-lg border border-blue-200 hover:shadow-xl transition-all duration-300">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="p-2 bg-gradient-to-br from-purple-400 to-purple-500 rounded-lg">
                                            <i data-lucide="zap" class="w-5 h-5 text-white"></i>
                                        </div>
                                    </div>
                                    <span class="text-sm font-semibold text-purple-600">Alpha</span>
                                </div>
                                <div class="text-2xl font-bold text-purple-600 mb-1">+13.9%</div>
                                <div class="text-sm text-gray-600 font-medium">Excess Return</div>
                                <div class="text-xs text-gray-500 mt-2">vs Benchmark</div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Performance Comparison Chart -->
                    <div class="bg-white rounded-xl p-6 shadow-2xl border border-blue-200">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-3">
                                <div class="p-2 bg-gradient-to-br from-blue-400 to-blue-500 rounded-lg">
                                    <i data-lucide="activity" class="w-5 h-5 text-white"></i>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800">HyperVision AI vs Benchmark Performance</h3>
                            </div>
                            <div class="flex gap-4">
                                <div class="flex items-center gap-2">
                                    <div class="w-4 h-2 bg-blue-500 rounded"></div>
                                    <span class="text-sm font-semibold text-gray-700">HyperVision AI Return</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-4 h-2 rounded" style="background: repeating-linear-gradient(90deg, #9ca3af, #9ca3af 3px, transparent 3px, transparent 6px); height: 8px;"></div>
                                    <span class="text-sm font-semibold text-gray-700">Market Benchmark</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="relative" style="height: 400px;">
                            <canvas id="performanceChart"></canvas>
                        </div>

                        <div class="grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-200">
                            <div class="text-center">
                                <div class="text-sm text-gray-600 mb-1">Sharpe Ratio</div>
                                <div class="flex justify-center gap-4">
                                    <div>
                                        <div class="text-lg font-bold text-green-600">2.89</div>
                                        <div class="text-xs text-gray-500">AI</div>
                                    </div>
                                    <div>
                                        <div class="text-lg font-bold text-gray-600">1.45</div>
                                        <div class="text-xs text-gray-500">Benchmark</div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <div class="text-sm text-gray-600 mb-1">Max Drawdown</div>
                                <div class="flex justify-center gap-4">
                                    <div>
                                        <div class="text-lg font-bold text-green-600">-4.8%</div>
                                        <div class="text-xs text-gray-500">AI</div>
                                    </div>
                                    <div>
                                        <div class="text-lg font-bold text-red-600">-12.3%</div>
                                        <div class="text-xs text-gray-500">Benchmark</div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <div class="text-sm text-gray-600 mb-1">Win Rate</div>
                                <div class="flex justify-center gap-4">
                                    <div>
                                        <div class="text-lg font-bold text-green-600">87.3%</div>
                                        <div class="text-xs text-gray-500">AI</div>
                                    </div>
                                    <div>
                                        <div class="text-lg font-bold text-gray-600">52.1%</div>
                                        <div class="text-xs text-gray-500">Benchmark</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Crypto vs Stablecoin Comparison Panel -->
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 shadow-2xl border border-blue-200">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="p-2 bg-gradient-to-br from-purple-400 to-purple-500 rounded-lg">
                                <i data-lucide="scale" class="w-5 h-5 text-white"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">Crypto vs Stablecoin Analysis</h3>
                            <div class="ml-auto text-xs bg-purple-100 text-purple-700 px-3 py-1 rounded-full font-semibold">
                                Real-time Comparison
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="bg-white p-4 rounded-lg border border-blue-200">
                                <div class="text-xs text-gray-600 mb-1">Crypto Volatility (24h)</div>
                                <div class="text-xl font-bold text-red-600" id="crypto-volatility">18.7%</div>
                                <div class="text-xs text-gray-500 mt-1">High Risk</div>
                            </div>
                            <div class="bg-white p-4 rounded-lg border border-green-200">
                                <div class="text-xs text-gray-600 mb-1">Stablecoin Volatility</div>
                                <div class="text-xl font-bold text-green-600" id="stable-volatility">0.12%</div>
                                <div class="text-xs text-gray-500 mt-1">Low Risk</div>
                            </div>
                            <div class="bg-white p-4 rounded-lg border border-purple-200">
                                <div class="text-xs text-gray-600 mb-1">Optimal Allocation</div>
                                <div class="text-lg font-bold text-purple-600" id="optimal-allocation">70/30</div>
                                <div class="text-xs text-gray-500 mt-1">Crypto/Stable</div>
                            </div>
                            <div class="bg-white p-4 rounded-lg border border-orange-200">
                                <div class="text-xs text-gray-600 mb-1">Risk-Adjusted Return</div>
                                <div class="text-xl font-bold text-orange-600" id="risk-adjusted">2.34</div>
                                <div class="text-xs text-gray-500 mt-1">Sharpe Ratio</div>
                            </div>
                        </div>
                        
                        <div class="mt-4 p-3 bg-white rounded-lg border border-gray-200">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-semibold text-gray-700">AI Recommendation</span>
                                <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full" id="market-condition">Volatile Market</span>
                            </div>
                            <div class="text-sm text-gray-600" id="ai-recommendation">
                                Based on current market volatility (18.7%), recommend increasing stablecoin allocation to 35% for risk mitigation while maintaining 65% crypto exposure for growth potential.
                            </div>
                        </div>
                    </div>

                    <!-- Live Trading & Market Data Row -->
                    <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                        <!-- Live Price Panel -->
                        <div class="xl:col-span-1">
                            <div class="bg-white rounded-xl p-6 shadow-2xl border border-blue-200 h-full">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center gap-3">
                                        <div class="p-2 bg-gradient-to-br from-blue-400 to-blue-500 rounded-lg">
                                            <i data-lucide="wifi" class="w-5 h-5 text-white"></i>
                                        </div>
                                        <h3 class="text-lg font-semibold text-gray-800">Live Market</h3>
                                        <div class="w-3 h-3 rounded-full bg-green-400 animate-pulse"></div>
                                    </div>
                                </div>
                                
                                <div class="space-y-4">
                                    <div>
                                        <div class="text-3xl font-bold text-gray-800">
                                            $<span id="live-price">45,234.67</span>
                                        </div>
                                        <div class="text-sm text-gray-600 font-medium"><span id="live-symbol">BTC-USD</span></div>
                                    </div>
                                    
                                    <div class="space-y-3">
                                        <div class="bg-blue-50 p-3 rounded-lg border border-blue-200">
                                            <div class="text-xs text-gray-600 mb-1">HyperVision AI Prediction (1h)</div>
                                            <div class="text-xl font-bold text-blue-600">$46,128.45</div>
                                            <div class="text-sm text-blue-600">+1.98% Expected</div>
                                        </div>
                                        
                                        <div class="bg-gray-50 p-3 rounded-lg border border-gray-200">
                                            <div class="text-xs text-gray-600 mb-1">Market Consensus</div>
                                            <div class="text-xl font-bold text-gray-700">$45,567.89</div>
                                            <div class="text-sm text-gray-600">+0.74% Expected</div>
                                        </div>

                                        <div class="bg-purple-50 p-3 rounded-lg border border-purple-200">
                                            <div class="text-xs text-gray-600 mb-1">AI Confidence</div>
                                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                                <div class="bg-purple-500 h-2 rounded-full" style="width: 84.7%"></div>
                                            </div>
                                            <div class="text-sm font-bold text-purple-600 mt-1">84.7%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Real-time Comparison Chart -->
                        <div class="xl:col-span-2">
                            <div class="bg-white rounded-xl p-6 shadow-2xl border border-blue-200">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center gap-3">
                                        <div class="p-2 bg-gradient-to-br from-blue-400 to-blue-500 rounded-lg">
                                            <i data-lucide="activity" class="w-5 h-5 text-white"></i>
                                        </div>
                                        <h3 class="text-lg font-semibold text-gray-800">Real-time Strategy Performance</h3>
                                    </div>
                                    <div class="flex gap-2">
                                        <span class="px-3 py-1 bg-green-100 text-green-800 text-sm rounded font-medium">
                                            ðŸ”´ LIVE
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="relative" style="height: 350px;">
                                    <canvas id="realtimeChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Metrics Row -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- AI Model Performance -->
                        <div class="bg-white rounded-xl p-6 shadow-2xl border border-blue-200">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="p-2 bg-gradient-to-br from-green-400 to-green-500 rounded-lg">
                                    <i data-lucide="cpu" class="w-5 h-5 text-white"></i>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-800">AI Model Performance</h3>
                            </div>
                            
                            <div class="space-y-3">
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-100">
                                        <span class="text-sm font-medium text-gray-700">Accuracy</span>
                                        <span class="font-bold text-blue-600" id="ai-accuracy">91.4%</span>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-100">
                                        <span class="text-sm font-medium text-gray-700">Precision</span>
                                        <span class="font-bold text-blue-600" id="ai-precision">89.7%</span>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="flex items-center justify-between p-3 bg-cream-100 rounded-lg border border-cream-200">
                                        <span class="text-sm font-medium text-gray-700">Recall</span>
                                        <span class="font-bold text-orange-600" id="ai-recall">92.8%</span>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-cream-100 rounded-lg border border-cream-200">
                                        <span class="text-sm font-medium text-gray-700">F1 Score</span>
                                        <span class="font-bold text-orange-600" id="ai-f1">0.913</span>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-100">
                                        <span class="text-sm font-medium text-gray-700">Info Ratio</span>
                                        <span class="font-bold text-purple-600" id="ai-info-ratio">3.21</span>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-100">
                                        <span class="text-sm font-medium text-gray-700">AUC-ROC</span>
                                        <span class="font-bold text-green-600" id="ai-auc">0.947</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg border border-yellow-100">
                                    <span class="font-medium text-gray-700">Model Latency</span>
                                    <span class="font-bold text-yellow-600" id="ai-latency">125ms</span>
                                </div>
                                <div class="mt-2 p-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200">
                                    <div class="text-xs text-center text-blue-600 font-semibold">
                                        <i data-lucide="activity" class="w-3 h-3 inline mr-1"></i>
                                        Real-time Updates Every 5 Seconds
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Trading Statistics -->
                        <div class="bg-white rounded-xl p-6 shadow-2xl border border-blue-200">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="p-2 bg-gradient-to-br from-blue-400 to-blue-500 rounded-lg">
                                    <i data-lucide="bar-chart-2" class="w-5 h-5 text-white"></i>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-800">Trading Statistics</h3>
                            </div>
                            
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 bg-cream-100 rounded-lg border border-cream-200">
                                    <span class="font-medium text-gray-700">Total Trades Today</span>
                                    <span class="font-bold text-gray-800">47</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-100">
                                    <span class="font-medium text-gray-700">Winning Trades</span>
                                    <span class="font-bold text-blue-600">41 (87.2%)</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-100">
                                    <span class="font-medium text-gray-700">Losing Trades</span>
                                    <span class="font-bold text-red-600">6 (12.8%)</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-cream-100 rounded-lg border border-cream-200">
                                    <span class="font-medium text-gray-700">Avg Trade Duration</span>
                                    <span class="font-bold text-blue-600">4h 23m</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Tab -->
                <div id="performance-content" class="space-y-8" style="display: none;">
                    <div class="bg-white rounded-xl p-8 shadow-2xl border border-blue-200">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">Performance Analytics</h3>
                        
                        <!-- Monthly Returns Comparison -->
                        <div class="mb-8">
                            <h4 class="text-lg font-semibold text-gray-700 mb-4">Monthly Returns Comparison</h4>
                            <div class="relative" style="height: 300px;">
                                <canvas id="monthlyReturnsChart"></canvas>
                            </div>
                        </div>

                        <!-- Risk Metrics -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border border-green-200">
                                <h5 class="font-semibold text-gray-700 mb-3">HyperVision AI</h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Annual Return</span>
                                        <span class="font-bold text-green-600">+32.7%</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Volatility</span>
                                        <span class="font-bold">11.3%</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Sharpe Ratio</span>
                                        <span class="font-bold">2.89</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-br from-gray-50 to-gray-100 p-6 rounded-lg border border-gray-200">
                                <h5 class="font-semibold text-gray-700 mb-3">Benchmark</h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Annual Return</span>
                                        <span class="font-bold text-gray-600">+18.8%</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Volatility</span>
                                        <span class="font-bold">13.0%</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Sharpe Ratio</span>
                                        <span class="font-bold">1.45</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200">
                                <h5 class="font-semibold text-gray-700 mb-3">Outperformance</h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Alpha</span>
                                        <span class="font-bold text-purple-600">+13.9%</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Beta</span>
                                        <span class="font-bold">0.87</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Info Ratio</span>
                                        <span class="font-bold">3.21</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div id="analytics-content" class="space-y-8" style="display: none;">
                    <!-- Model Performance Metrics -->
                    <div class="bg-white rounded-xl p-6 shadow-2xl border border-blue-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">Advanced Model Analytics</h3>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Confusion Matrix -->
                            <div>
                                <h4 class="font-semibold text-gray-700 mb-4">Confusion Matrix (Last 1000 Predictions)</h4>
                                <div class="grid grid-cols-3 gap-2 text-sm">
                                    <div></div>
                                    <div class="text-center font-semibold bg-gray-100 p-2 rounded">Predicted Buy</div>
                                    <div class="text-center font-semibold bg-gray-100 p-2 rounded">Predicted Sell</div>
                                    <div class="font-semibold bg-gray-100 p-2 rounded">Actual Buy</div>
                                    <div class="bg-green-100 p-4 rounded text-center font-bold text-green-700" id="tp-value">487</div>
                                    <div class="bg-red-100 p-4 rounded text-center font-bold text-red-700" id="fn-value">63</div>
                                    <div class="font-semibold bg-gray-100 p-2 rounded">Actual Sell</div>
                                    <div class="bg-red-100 p-4 rounded text-center font-bold text-red-700" id="fp-value">51</div>
                                    <div class="bg-green-100 p-4 rounded text-center font-bold text-green-700" id="tn-value">399</div>
                                </div>
                                <div class="mt-4 grid grid-cols-2 gap-3 text-sm">
                                    <div class="bg-blue-50 p-3 rounded border border-blue-200">
                                        <span class="text-gray-600">Specificity:</span>
                                        <span class="font-bold text-blue-600 ml-2" id="specificity">88.7%</span>
                                    </div>
                                    <div class="bg-purple-50 p-3 rounded border border-purple-200">
                                        <span class="text-gray-600">Sensitivity:</span>
                                        <span class="font-bold text-purple-600 ml-2" id="sensitivity">88.5%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Performance Metrics Grid -->
                            <div>
                                <h4 class="font-semibold text-gray-700 mb-4">Comprehensive Metrics</h4>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="bg-blue-50 p-3 rounded border border-blue-100">
                                        <div class="text-xs text-gray-600">Accuracy</div>
                                        <div class="text-lg font-bold text-blue-600" id="metric-accuracy">91.4%</div>
                                    </div>
                                    <div class="bg-blue-50 p-3 rounded border border-blue-100">
                                        <div class="text-xs text-gray-600">Precision</div>
                                        <div class="text-lg font-bold text-blue-600" id="metric-precision">90.5%</div>
                                    </div>
                                    <div class="bg-cream-100 p-3 rounded border border-cream-200">
                                        <div class="text-xs text-gray-600">Recall</div>
                                        <div class="text-lg font-bold text-orange-600" id="metric-recall">88.5%</div>
                                    </div>
                                    <div class="bg-cream-100 p-3 rounded border border-cream-200">
                                        <div class="text-xs text-gray-600">F1 Score</div>
                                        <div class="text-lg font-bold text-orange-600" id="metric-f1">0.895</div>
                                    </div>
                                    <div class="bg-purple-50 p-3 rounded border border-purple-100">
                                        <div class="text-xs text-gray-600">AUC-ROC</div>
                                        <div class="text-lg font-bold text-purple-600" id="metric-auc">0.947</div>
                                    </div>
                                    <div class="bg-green-50 p-3 rounded border border-green-100">
                                        <div class="text-xs text-gray-600">MCC</div>
                                        <div class="text-lg font-bold text-green-600" id="metric-mcc">0.774</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Feature Importance -->
                        <div class="mt-6">
                            <h4 class="font-semibold text-gray-700 mb-4">Feature Importance (Real-time Analysis)</h4>
                            <div class="space-y-2" id="feature-importance">
                                <!-- Will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Backtesting Results -->
                    <div class="bg-white rounded-xl p-6 shadow-2xl border border-blue-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">Live Backtesting Results</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="backtest-results">
                            <!-- Will be populated with real data -->
                        </div>
                    </div>
                </div>

                <!-- Portfolio Tab -->
                <div id="portfolio-content" class="space-y-8" style="display: none;">
                    <!-- Portfolio Overview -->
                    <div class="bg-white rounded-xl p-6 shadow-2xl border border-blue-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">Portfolio Composition</h3>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Asset Allocation -->
                            <div>
                                <h4 class="font-semibold text-gray-700 mb-4">Current Allocation</h4>
                                <canvas id="allocationChart" height="250"></canvas>
                                <div class="mt-4 space-y-2" id="portfolio-holdings">
                                    <!-- Will be populated dynamically -->
                                </div>
                            </div>
                            
                            <!-- Risk Metrics -->
                            <div>
                                <h4 class="font-semibold text-gray-700 mb-4">Risk Analysis</h4>
                                <div class="space-y-3">
                                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-700">Portfolio Beta</span>
                                            <span class="font-bold text-blue-600" id="portfolio-beta">0.87</span>
                                        </div>
                                    </div>
                                    <div class="bg-cream-100 p-4 rounded-lg border border-cream-200">
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-700">Value at Risk (95%)</span>
                                            <span class="font-bold text-orange-600" id="portfolio-var">-$48,234</span>
                                        </div>
                                    </div>
                                    <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-700">Sortino Ratio</span>
                                            <span class="font-bold text-purple-600" id="portfolio-sortino">3.14</span>
                                        </div>
                                    </div>
                                    <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-700">Calmar Ratio</span>
                                            <span class="font-bold text-green-600" id="portfolio-calmar">6.82</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Position Details -->
                    <div class="bg-white rounded-xl p-6 shadow-2xl border border-blue-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">Open Positions</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="bg-gray-50 border-b">
                                        <th class="text-left p-3">Asset</th>
                                        <th class="text-right p-3">Quantity</th>
                                        <th class="text-right p-3">Entry Price</th>
                                        <th class="text-right p-3">Current Price</th>
                                        <th class="text-right p-3">P&L</th>
                                        <th class="text-right p-3">P&L %</th>
                                        <th class="text-center p-3">AI Signal</th>
                                    </tr>
                                </thead>
                                <tbody id="positions-table">
                                    <!-- Will be populated dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Rebalancing Recommendations -->
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 shadow-2xl border border-blue-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">AI Rebalancing Recommendations</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="rebalancing-recommendations">
                            <!-- Will be populated dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application state
        let appState = {
            selectedAsset: 'BTC-USD',
            predictionHorizon: '1h',
            userMode: 'retail',
            activeTab: 'dashboard',
            charts: {}
        };

        // Initialize Lucide icons
        lucide.createIcons();

        // Chart configuration
        const chartColors = {
            ai: '#3b82f6', // blue-500 for HyperVision AI
            benchmark: '#9ca3af', // gray-400 for Market Benchmark
            prediction: '#9333ea', // purple-600
            grid: '#e5e7eb', // gray-200
            text: '#6b7280' // gray-500
        };

        // Generate mock data for charts
        function generatePerformanceData() {
            const months = 12;
            const labels = [];
            const aiReturns = [100];
            const benchmarkReturns = [100];
            
            const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const currentMonth = new Date().getMonth();
            
            for (let i = 0; i <= currentMonth; i++) {
                labels.push(monthNames[i]);
                
                // AI consistently outperforms with lower volatility
                const aiMonthlyReturn = 1 + (Math.random() * 0.08 - 0.01); // -1% to +7% monthly
                const benchmarkMonthlyReturn = 1 + (Math.random() * 0.12 - 0.04); // -4% to +8% monthly
                
                aiReturns.push(aiReturns[aiReturns.length - 1] * aiMonthlyReturn);
                benchmarkReturns.push(benchmarkReturns[benchmarkReturns.length - 1] * benchmarkMonthlyReturn);
            }
            
            // Convert to percentage returns
            const aiPercentReturns = aiReturns.map(v => ((v - 100) / 100 * 100).toFixed(2));
            const benchmarkPercentReturns = benchmarkReturns.map(v => ((v - 100) / 100 * 100).toFixed(2));
            
            return { labels, aiReturns: aiPercentReturns, benchmarkReturns: benchmarkPercentReturns };
        }

        function generateRealtimeData() {
            const points = 50;
            const labels = [];
            const aiData = [];
            const benchmarkData = [];
            
            const now = new Date();
            let aiValue = 100;
            let benchmarkValue = 100;
            
            for (let i = points; i >= 0; i--) {
                const time = new Date(now - i * 60 * 1000);
                labels.push(time.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }));
                
                // AI strategy with smoother, more consistent gains
                aiValue *= 1 + (Math.random() * 0.004 - 0.001);
                benchmarkValue *= 1 + (Math.random() * 0.006 - 0.003);
                
                aiData.push(aiValue.toFixed(2));
                benchmarkData.push(benchmarkValue.toFixed(2));
            }
            
            return { labels, aiData, benchmarkData };
        }

        function generateMonthlyReturns() {
            const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const currentMonth = new Date().getMonth();
            const labels = monthNames.slice(0, currentMonth + 1);
            
            const aiReturns = [];
            const benchmarkReturns = [];
            
            for (let i = 0; i <= currentMonth; i++) {
                // AI returns: consistently positive with occasional high performers
                aiReturns.push((Math.random() * 8 + 1).toFixed(1));
                // Benchmark returns: more volatile
                benchmarkReturns.push((Math.random() * 10 - 2).toFixed(1));
            }
            
            return { labels, aiReturns, benchmarkReturns };
        }

        // Initialize Performance Chart
        function initPerformanceChart() {
            const ctx = document.getElementById('performanceChart');
            if (!ctx) return;
            
            const data = generatePerformanceData();
            
            appState.charts.performance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'HyperVision AI',
                            data: data.aiReturns,
                            borderColor: chartColors.ai,
                            backgroundColor: 'rgba(34, 197, 94, 0.1)',
                            borderWidth: 3,
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6,
                            pointBackgroundColor: chartColors.ai,
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2
                        },
                        {
                            label: 'Benchmark (S&P Crypto)',
                            data: data.benchmarkReturns,
                            borderColor: chartColors.benchmark,
                            backgroundColor: 'rgba(156, 163, 175, 0.1)',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6,
                            pointBackgroundColor: chartColors.benchmark,
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(255, 255, 255, 0.95)',
                            titleColor: '#111827',
                            bodyColor: '#374151',
                            borderColor: '#e5e7eb',
                            borderWidth: 1,
                            padding: 12,
                            displayColors: true,
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: chartColors.text
                            }
                        },
                        y: {
                            grid: {
                                color: chartColors.grid
                            },
                            ticks: {
                                color: chartColors.text,
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            title: {
                                display: true,
                                text: 'Cumulative Return',
                                color: chartColors.text
                            }
                        }
                    }
                }
            });
        }

        // Initialize Real-time Chart
        function initRealtimeChart() {
            const ctx = document.getElementById('realtimeChart');
            if (!ctx) return;
            
            const data = generateRealtimeData();
            
            appState.charts.realtime = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'HyperVision AI Return',
                            data: data.aiData,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.05)',
                            borderWidth: 3,
                            tension: 0.1,
                            pointRadius: 0,
                            pointHoverRadius: 4
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.benchmarkData,
                            borderColor: '#9ca3af',
                            backgroundColor: 'rgba(156, 163, 175, 0.05)',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            tension: 0.1,
                            pointRadius: 0,
                            pointHoverRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 0
                    },
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                usePointStyle: true,
                                color: chartColors.text
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(255, 255, 255, 0.95)',
                            titleColor: '#111827',
                            bodyColor: '#374151',
                            borderColor: '#3b82f6',
                            borderWidth: 1,
                            padding: 12,
                            displayColors: true,
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += '$' + parseFloat(context.parsed.y).toFixed(2);
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: chartColors.text,
                                maxRotation: 0,
                                autoSkipPadding: 20
                            }
                        },
                        y: {
                            grid: {
                                color: chartColors.grid
                            },
                            ticks: {
                                color: chartColors.text,
                                callback: function(value) {
                                    return '$' + value;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Initialize Monthly Returns Chart
        function initMonthlyReturnsChart() {
            const ctx = document.getElementById('monthlyReturnsChart');
            if (!ctx) return;
            
            const data = generateMonthlyReturns();
            
            appState.charts.monthlyReturns = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'HyperVision AI Return',
                            data: data.aiReturns,
                            backgroundColor: 'rgba(59, 130, 246, 0.8)',
                            borderColor: '#3b82f6',
                            borderWidth: 1
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.benchmarkReturns,
                            backgroundColor: 'rgba(156, 163, 175, 0.8)',
                            borderColor: '#9ca3af',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                padding: 15,
                                usePointStyle: true,
                                color: chartColors.text
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: chartColors.text
                            }
                        },
                        y: {
                            grid: {
                                color: chartColors.grid
                            },
                            ticks: {
                                color: chartColors.text,
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            title: {
                                display: true,
                                text: 'Monthly Return (%)',
                                color: chartColors.text
                            }
                        }
                    }
                }
            });
        }

        // Update time displays
        function updateTimes() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            
            const timeElements = ['time-1', 'time-2', 'time-3', 'time-4'];
            timeElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = timeString;
            });
        }

        // Update live data
        function updateLiveData() {
            // Update prices
            const basePrice = 45234.67;
            const variation = (Math.random() - 0.5) * 1000;
            const newPrice = basePrice + variation;
            
            const priceElement = document.getElementById('live-price');
            if (priceElement) {
                priceElement.textContent = newPrice.toLocaleString('en-US', { 
                    minimumFractionDigits: 2, 
                    maximumFractionDigits: 2 
                });
            }
            
            // Update real-time chart
            if (appState.charts.realtime) {
                const chart = appState.charts.realtime;
                const newRealtimeData = generateRealtimeData();
                
                chart.data.labels = newRealtimeData.labels;
                chart.data.datasets[0].data = newRealtimeData.aiData;
                chart.data.datasets[1].data = newRealtimeData.benchmarkData;
                chart.update('none');
            }
            
            // Update alpha generation
            const alphaElement = document.getElementById('alpha-generation');
            if (alphaElement) {
                const newAlpha = 13.5 + Math.random() * 1;
                alphaElement.textContent = newAlpha.toFixed(1);
            }
        }

        // Tab switching
        function switchTab(tabName) {
            appState.activeTab = tabName;
            
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                const isActive = button.getAttribute('data-tab') === tabName;
                button.className = `tab-button px-6 py-3 rounded-lg font-semibold capitalize transition-all duration-200 flex items-center gap-2 shadow-lg ${
                    isActive 
                        ? 'bg-gradient-to-r from-blue-400 to-blue-500 text-white shadow-blue-400/25' 
                        : 'bg-gradient-to-r from-cream-200 to-cream-300 text-gray-800 hover:from-cream-300 hover:to-cream-400 border border-blue-200'
                }`;
            });

            // Show/hide content
            const contentIds = ['dashboard-content', 'performance-content', 'analytics-content', 'portfolio-content'];
            contentIds.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.style.display = id === `${tabName}-content` ? 'block' : 'none';
                }
            });

            // Initialize charts for performance tab
            if (tabName === 'performance' && !appState.charts.monthlyReturns) {
                setTimeout(() => initMonthlyReturnsChart(), 100);
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize icons
            lucide.createIcons();
            
            // Tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });

            // Asset selector
            const assetSelect = document.getElementById('asset-select');
            if (assetSelect) {
                assetSelect.addEventListener('change', function() {
                    appState.selectedAsset = this.value;
                    const symbolElement = document.getElementById('live-symbol');
                    if (symbolElement) symbolElement.textContent = this.value;
                });
            }

            // Initialize charts
            initPerformanceChart();
            initRealtimeChart();
            
            // Start live updates
            updateTimes();
            updateLiveData();
            
            setInterval(updateTimes, 1000);
            setInterval(updateLiveData, 3000);
            
            // Initialize with dashboard tab
            switchTab('dashboard');
            
            // Initialize real-time data fetching
            initializeRealTimeData();
            initializePortfolio();
            initializeAnalytics();
            initializeRealTimeModelMetrics();
            updateCryptoVsStableAnalysis();
            
            // Update crypto vs stable analysis every 20 seconds
            setInterval(updateCryptoVsStableAnalysis, 20000);
        });

        // Real-time cryptocurrency data using CoinGecko API (free tier)
        async function fetchRealCryptoData() {
            try {
                const assets = ['bitcoin', 'ethereum', 'cardano', 'solana', 'matic-network'];
                const vs_currency = 'usd';
                const url = `https://api.coingecko.com/api/v3/simple/price?ids=${assets.join(',')}&vs_currencies=${vs_currency}&include_market_cap=true&include_24hr_vol=true&include_24hr_change=true&include_last_updated_at=true`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                return data;
            } catch (error) {
                console.error('Error fetching crypto data:', error);
                // Fallback to alternative API or cached data
                return fetchAlternativeData();
            }
        }

        // Alternative data source using Binance public API
        async function fetchAlternativeData() {
            try {
                const symbol = appState.selectedAsset.replace('-', '');
                const url = `https://api.binance.com/api/v3/ticker/24hr?symbol=${symbol}`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                return {
                    price: parseFloat(data.lastPrice),
                    change24h: parseFloat(data.priceChangePercent),
                    volume: parseFloat(data.volume)
                };
            } catch (error) {
                console.error('Error fetching Binance data:', error);
                // Return last known data
                return appState.realTimePrice;
            }
        }

        // Fetch historical data for charts
        async function fetchHistoricalData(symbol, days = 30) {
            try {
                const coinId = symbol.toLowerCase().split('-')[0];
                const coinMap = {
                    'btc': 'bitcoin',
                    'eth': 'ethereum',
                    'ada': 'cardano',
                    'sol': 'solana',
                    'matic': 'matic-network'
                };
                
                const url = `https://api.coingecko.com/api/v3/coins/${coinMap[coinId] || 'bitcoin'}/market_chart?vs_currency=usd&days=${days}`;
                const response = await fetch(url);
                const data = await response.json();
                
                return data.prices.map(([timestamp, price]) => ({
                    timestamp: new Date(timestamp),
                    price: price
                }));
            } catch (error) {
                console.error('Error fetching historical data:', error);
                return [];
            }
        }

        // Initialize real-time data updates
        function initializeRealTimeData() {
            // Fetch real crypto data every 10 seconds
            setInterval(async () => {
                const data = await fetchRealCryptoData();
                if (data) {
                    updatePricesWithRealData(data);
                }
            }, 10000);
            
            // Initial fetch
            fetchRealCryptoData().then(data => {
                if (data) updatePricesWithRealData(data);
            });
        }

        // Update UI with real crypto data
        function updatePricesWithRealData(data) {
            const assetMap = {
                'BTC-USD': 'bitcoin',
                'ETH-USD': 'ethereum',
                'ADA-USD': 'cardano',
                'SOL-USD': 'solana',
                'MATIC-USD': 'matic-network'
            };
            
            const asset = assetMap[appState.selectedAsset];
            if (data[asset]) {
                const price = data[asset].usd;
                const change24h = data[asset].usd_24h_change || 0;
                const volume = data[asset].usd_24h_vol || 0;
                
                // Update price displays
                document.getElementById('live-price').textContent = price.toLocaleString('en-US', { 
                    minimumFractionDigits: 2, 
                    maximumFractionDigits: 2 
                });
                
                document.getElementById('current-price').textContent = price.toLocaleString('en-US', { 
                    minimumFractionDigits: 2, 
                    maximumFractionDigits: 2 
                });
                
                // Update change percentage
                const changeElements = document.querySelectorAll('[id*="change"]');
                changeElements.forEach(el => {
                    if (el.id.includes('percent')) {
                        el.textContent = Math.abs(change24h).toFixed(2);
                    }
                });
                
                // Update volume
                const volumeEl = document.getElementById('volume');
                if (volumeEl) {
                    volumeEl.textContent = (volume / 1000000).toFixed(1);
                }
            }
        }

        // Initialize Portfolio functionality
        function initializePortfolio() {
            // Portfolio allocation chart
            const ctx = document.getElementById('allocationChart');
            if (ctx) {
                const allocationChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Bitcoin', 'Ethereum', 'Solana', 'Cardano', 'Polygon'],
                        datasets: [{
                            data: [35, 25, 15, 15, 10],
                            backgroundColor: [
                                '#3b82f6',
                                '#8b5cf6',
                                '#06b6d4',
                                '#10b981',
                                '#f59e0b'
                            ],
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.label + ': ' + context.parsed + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Populate portfolio positions
            updatePortfolioPositions();
            
            // Update rebalancing recommendations
            updateRebalancingRecommendations();
        }

        // Update portfolio positions table
        async function updatePortfolioPositions() {
            const positions = [
                { asset: 'BTC', quantity: 0.75, entryPrice: 42000, allocation: 35 },
                { asset: 'ETH', quantity: 5.2, entryPrice: 2800, allocation: 25 },
                { asset: 'SOL', quantity: 125, entryPrice: 95, allocation: 15 },
                { asset: 'ADA', quantity: 8500, entryPrice: 0.45, allocation: 15 },
                { asset: 'MATIC', quantity: 4200, entryPrice: 0.85, allocation: 10 }
            ];
            
            const tbody = document.getElementById('positions-table');
            if (!tbody) return;
            
            // Fetch current prices
            const data = await fetchRealCryptoData();
            const priceMap = {
                'BTC': data?.bitcoin?.usd || 45000,
                'ETH': data?.ethereum?.usd || 3000,
                'SOL': data?.solana?.usd || 100,
                'ADA': data?.cardano?.usd || 0.5,
                'MATIC': data?.['matic-network']?.usd || 0.9
            };
            
            tbody.innerHTML = positions.map(pos => {
                const currentPrice = priceMap[pos.asset];
                const value = pos.quantity * currentPrice;
                const entryValue = pos.quantity * pos.entryPrice;
                const pnl = value - entryValue;
                const pnlPercent = ((pnl / entryValue) * 100).toFixed(2);
                const signal = pnl > 0 ? 'HOLD' : 'BUY MORE';
                const signalColor = pnl > 0 ? 'text-green-600' : 'text-blue-600';
                
                return `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="p-3 font-semibold">${pos.asset}-USD</td>
                        <td class="text-right p-3">${pos.quantity.toLocaleString()}</td>
                        <td class="text-right p-3">$${pos.entryPrice.toLocaleString()}</td>
                        <td class="text-right p-3">$${currentPrice.toLocaleString()}</td>
                        <td class="text-right p-3 ${pnl >= 0 ? 'text-green-600' : 'text-red-600'} font-semibold">
                            ${pnl >= 0 ? '+' : ''}$${Math.abs(pnl).toLocaleString(undefined, {maximumFractionDigits: 0})}
                        </td>
                        <td class="text-right p-3 ${pnl >= 0 ? 'text-green-600' : 'text-red-600'} font-semibold">
                            ${pnl >= 0 ? '+' : ''}${pnlPercent}%
                        </td>
                        <td class="text-center p-3">
                            <span class="px-3 py-1 rounded-full text-xs font-semibold ${signalColor} bg-gray-100">
                                ${signal}
                            </span>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Update rebalancing recommendations
        function updateRebalancingRecommendations() {
            const recommendations = [
                { action: 'INCREASE', asset: 'SOL', amount: '+12%', reason: 'Strong momentum detected' },
                { action: 'REDUCE', asset: 'ADA', amount: '-5%', reason: 'Weakening technicals' },
                { action: 'HOLD', asset: 'BTC', amount: '0%', reason: 'Optimal allocation' }
            ];
            
            const container = document.getElementById('rebalancing-recommendations');
            if (!container) return;
            
            container.innerHTML = recommendations.map(rec => {
                const bgColor = rec.action === 'INCREASE' ? 'bg-green-100' : 
                               rec.action === 'REDUCE' ? 'bg-red-100' : 'bg-gray-100';
                const textColor = rec.action === 'INCREASE' ? 'text-green-700' : 
                                 rec.action === 'REDUCE' ? 'text-red-700' : 'text-gray-700';
                
                return `
                    <div class="${bgColor} p-4 rounded-lg border border-gray-200">
                        <div class="font-semibold ${textColor} mb-1">${rec.action} ${rec.asset}</div>
                        <div class="text-2xl font-bold ${textColor}">${rec.amount}</div>
                        <div class="text-sm text-gray-600 mt-2">${rec.reason}</div>
                    </div>
                `;
            }).join('');
        }

        // Initialize Analytics functionality
        function initializeAnalytics() {
            // Update feature importance
            const features = [
                { name: 'Price Momentum', importance: 0.92 },
                { name: 'Volume Profile', importance: 0.87 },
                { name: 'Market Sentiment', importance: 0.78 },
                { name: 'On-chain Data', importance: 0.71 },
                { name: 'Technical Indicators', importance: 0.65 },
                { name: 'Order Book Depth', importance: 0.58 },
                { name: 'Funding Rates', importance: 0.52 },
                { name: 'Social Metrics', importance: 0.45 }
            ];
            
            const container = document.getElementById('feature-importance');
            if (container) {
                container.innerHTML = features.map(f => `
                    <div class="flex items-center">
                        <span class="w-40 text-sm">${f.name}</span>
                        <div class="flex-1 bg-gray-200 rounded-full h-4 mr-2">
                            <div class="bg-blue-500 h-4 rounded-full transition-all duration-500" style="width: ${f.importance * 100}%"></div>
                        </div>
                        <span class="text-sm font-semibold">${f.importance.toFixed(2)}</span>
                    </div>
                `).join('');
            }
            
            // Update backtesting results
            updateBacktestResults();
            
            // Update confusion matrix periodically
            setInterval(updateConfusionMatrix, 30000);
        }

        // Update confusion matrix with realistic values
        function updateConfusionMatrix() {
            // Simulate realistic confusion matrix values
            const tp = 450 + Math.floor(Math.random() * 50);
            const fp = 40 + Math.floor(Math.random() * 20);
            const fn = 50 + Math.floor(Math.random() * 20);
            const tn = 400 + Math.floor(Math.random() * 50);
            
            document.getElementById('tp-value').textContent = tp;
            document.getElementById('fp-value').textContent = fp;
            document.getElementById('fn-value').textContent = fn;
            document.getElementById('tn-value').textContent = tn;
            
            // Calculate metrics
            const accuracy = ((tp + tn) / (tp + fp + fn + tn) * 100).toFixed(1);
            const precision = (tp / (tp + fp) * 100).toFixed(1);
            const recall = (tp / (tp + fn) * 100).toFixed(1);
            const specificity = (tn / (tn + fp) * 100).toFixed(1);
            const f1 = (2 * (precision * recall) / (parseFloat(precision) + parseFloat(recall)) / 100).toFixed(3);
            
            document.getElementById('metric-accuracy').textContent = accuracy + '%';
            document.getElementById('metric-precision').textContent = precision + '%';
            document.getElementById('metric-recall').textContent = recall + '%';
            document.getElementById('specificity').textContent = specificity + '%';
            document.getElementById('sensitivity').textContent = recall + '%';
            document.getElementById('metric-f1').textContent = f1;
        }

        // Update backtesting results
        function updateBacktestResults() {
            const results = [
                { period: '1 Year', return: 47.3, benchmark: 18.2, color: 'blue' },
                { period: '6 Months', return: 23.8, benchmark: 9.4, color: 'purple' },
                { period: '3 Months', return: 12.1, benchmark: 4.7, color: 'orange' },
                { period: '1 Month', return: 5.2, benchmark: 1.8, color: 'green' },
                { period: '1 Week', return: 1.8, benchmark: 0.3, color: 'indigo' },
                { period: 'Today', return: 0.42, benchmark: -0.15, color: 'pink' }
            ];
            
            const container = document.getElementById('backtest-results');
            if (container) {
                container.innerHTML = results.map(r => `
                    <div class="bg-gradient-to-br from-${r.color}-50 to-${r.color}-100 p-4 rounded-lg border border-${r.color}-200">
                        <h5 class="font-semibold text-gray-700 mb-2">${r.period}</h5>
                        <div class="text-2xl font-bold text-${r.color}-600">+${r.return}%</div>
                        <div class="text-sm text-gray-600">Total Return</div>
                        <div class="text-xs text-green-600 mt-1">vs Benchmark: +${r.benchmark}%</div>
                        <div class="text-xs font-semibold text-purple-600 mt-1">Alpha: +${(r.return - r.benchmark).toFixed(1)}%</div>
                    </div>
                `).join('');
            }
        }

        // Real-time update functions for volatile crypto markets
        function initializeRealTimeModelMetrics() {
            // Update AI model metrics every 5 seconds
            setInterval(() => {
                updateAIModelMetrics();
            }, 5000);
            
            // Initial update
            updateAIModelMetrics();
        }

        function updateAIModelMetrics() {
            // Simulate real-time model performance with slight variations
            const baseMetrics = {
                accuracy: 91.4,
                precision: 89.7,
                recall: 92.8,
                f1: 0.913,
                infoRatio: 3.21,
                auc: 0.947
            };
            
            // Add small variations to simulate real-time changes
            const accuracy = (baseMetrics.accuracy + (Math.random() - 0.5) * 0.5).toFixed(1);
            const precision = (baseMetrics.precision + (Math.random() - 0.5) * 0.8).toFixed(1);
            const recall = (baseMetrics.recall + (Math.random() - 0.5) * 0.6).toFixed(1);
            const f1 = ((2 * precision * recall) / (parseFloat(precision) + parseFloat(recall)) / 100).toFixed(3);
            const infoRatio = (baseMetrics.infoRatio + (Math.random() - 0.5) * 0.1).toFixed(2);
            const auc = (baseMetrics.auc + (Math.random() - 0.5) * 0.01).toFixed(3);
            const latency = (120 + Math.random() * 10).toFixed(0);
            
            // Update DOM elements
            const elements = {
                'ai-accuracy': accuracy + '%',
                'ai-precision': precision + '%',
                'ai-recall': recall + '%',
                'ai-f1': f1,
                'ai-info-ratio': infoRatio,
                'ai-auc': auc,
                'ai-latency': latency + 'ms'
            };
            
            for (const [id, value] of Object.entries(elements)) {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                    // Add pulse animation on update
                    element.classList.add('animate-pulse');
                    setTimeout(() => element.classList.remove('animate-pulse'), 1000);
                }
            }
        }

        // Stablecoin analysis and comparison functions
        async function fetchStablecoinData() {
            try {
                const stablecoins = ['tether', 'usd-coin', 'dai', 'binance-usd'];
                const url = `https://api.coingecko.com/api/v3/simple/price?ids=${stablecoins.join(',')}&vs_currencies=usd&include_24hr_change=true`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                return data;
            } catch (error) {
                console.error('Error fetching stablecoin data:', error);
                return null;
            }
        }

        function calculateVolatility(priceChanges) {
            // Calculate standard deviation of price changes
            const mean = priceChanges.reduce((a, b) => a + b, 0) / priceChanges.length;
            const variance = priceChanges.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / priceChanges.length;
            return Math.sqrt(variance);
        }

        async function updateCryptoVsStableAnalysis() {
            // Fetch both crypto and stablecoin data
            const [cryptoData, stableData] = await Promise.all([
                fetchRealCryptoData(),
                fetchStablecoinData()
            ]);
            
            if (cryptoData && stableData) {
                // Calculate crypto volatility (average of major cryptos)
                const cryptoVolatilities = [];
                if (cryptoData.bitcoin) cryptoVolatilities.push(Math.abs(cryptoData.bitcoin.usd_24h_change || 0));
                if (cryptoData.ethereum) cryptoVolatilities.push(Math.abs(cryptoData.ethereum.usd_24h_change || 0));
                if (cryptoData.solana) cryptoVolatilities.push(Math.abs(cryptoData.solana.usd_24h_change || 0));
                
                const avgCryptoVolatility = cryptoVolatilities.length > 0 
                    ? (cryptoVolatilities.reduce((a, b) => a + b, 0) / cryptoVolatilities.length).toFixed(1)
                    : 18.7;
                
                // Calculate stablecoin volatility (should be minimal)
                const stableVolatilities = [];
                if (stableData.tether) stableVolatilities.push(Math.abs(stableData.tether.usd_24h_change || 0));
                if (stableData['usd-coin']) stableVolatilities.push(Math.abs(stableData['usd-coin'].usd_24h_change || 0));
                if (stableData.dai) stableVolatilities.push(Math.abs(stableData.dai.usd_24h_change || 0));
                
                const avgStableVolatility = stableVolatilities.length > 0
                    ? (stableVolatilities.reduce((a, b) => a + b, 0) / stableVolatilities.length).toFixed(2)
                    : 0.12;
                
                // Update UI
                document.getElementById('crypto-volatility').textContent = avgCryptoVolatility + '%';
                document.getElementById('stable-volatility').textContent = avgStableVolatility + '%';
                
                // Calculate optimal allocation based on volatility
                const riskLevel = parseFloat(avgCryptoVolatility);
                let cryptoAllocation, stableAllocation;
                
                if (riskLevel > 20) {
                    // Very high volatility - conservative allocation
                    cryptoAllocation = 60;
                    stableAllocation = 40;
                    document.getElementById('market-condition').textContent = 'Extreme Volatility';
                    document.getElementById('market-condition').className = 'text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full';
                } else if (riskLevel > 15) {
                    // High volatility - moderate allocation
                    cryptoAllocation = 70;
                    stableAllocation = 30;
                    document.getElementById('market-condition').textContent = 'High Volatility';
                    document.getElementById('market-condition').className = 'text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full';
                } else if (riskLevel > 10) {
                    // Moderate volatility - balanced allocation
                    cryptoAllocation = 75;
                    stableAllocation = 25;
                    document.getElementById('market-condition').textContent = 'Moderate Volatility';
                    document.getElementById('market-condition').className = 'text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full';
                } else {
                    // Low volatility - aggressive allocation
                    cryptoAllocation = 85;
                    stableAllocation = 15;
                    document.getElementById('market-condition').textContent = 'Low Volatility';
                    document.getElementById('market-condition').className = 'text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full';
                }
                
                document.getElementById('optimal-allocation').textContent = `${cryptoAllocation}/${stableAllocation}`;
                
                // Calculate risk-adjusted return (simplified Sharpe ratio)
                const expectedReturn = cryptoAllocation * 0.35 + stableAllocation * 0.04; // Assumed annual returns
                const portfolioVolatility = Math.sqrt(
                    Math.pow(cryptoAllocation / 100 * riskLevel, 2) + 
                    Math.pow(stableAllocation / 100 * 0.12, 2)
                );
                const sharpeRatio = (expectedReturn / portfolioVolatility).toFixed(2);
                document.getElementById('risk-adjusted').textContent = sharpeRatio;
                
                // Update AI recommendation
                const recommendation = `Based on current market volatility (${avgCryptoVolatility}%), recommend ${stableAllocation}% stablecoin allocation for risk mitigation while maintaining ${cryptoAllocation}% crypto exposure. ` +
                    `This portfolio targets a ${sharpeRatio} Sharpe ratio with expected annual return of ${expectedReturn.toFixed(1)}%.`;
                document.getElementById('ai-recommendation').textContent = recommendation;
            }
        }

        // Enhanced portfolio update for real-time volatile markets
        async function updatePortfolioRealTime() {
            // Update portfolio every 10 seconds for volatile markets
            setInterval(async () => {
                await updatePortfolioPositions();
                updateRebalancingRecommendations();
            }, 10000);
        }

        // Initialize all real-time features when Analytics tab is opened
        function initializeAdvancedAnalytics() {
            initializeAnalytics();
            initializeRealTimeModelMetrics();
            updateCryptoVsStableAnalysis();
            
            // Update crypto vs stable analysis every 30 seconds
            setInterval(updateCryptoVsStableAnalysis, 30000);
        }

        // Update the tab switching to initialize analytics when needed
        const originalSwitchTab = switchTab;
        switchTab = function(tabName) {
            originalSwitchTab(tabName);
            
            if (tabName === 'analytics' && !appState.analyticsInitialized) {
                initializeAdvancedAnalytics();
                appState.analyticsInitialized = true;
            }
            
            if (tabName === 'portfolio' && !appState.portfolioRealTimeInitialized) {
                updatePortfolioRealTime();
                appState.portfolioRealTimeInitialized = true;
            }
        }
    </script>
</body>
</html>